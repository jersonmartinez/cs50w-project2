<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %}{% endblock %}</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='images/logo/favicon.png') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/fontawesome/css/all.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/custom/css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/toastr/css/toastr.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/custom/css/scroll-to-top.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/custom/css/stars.css') }}">
    <script src="{{ url_for('static', filename='libs/jquery/jquery-3.6.0.min.js') }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap4.min.css">

    <!-- JS DataTables -->
    <script src="{{ url_for('static', filename='libs/datatables/datatables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/JSZip-2.5.0/jszip.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/pdfmake-0.1.36/pdfmake.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/pdfmake-0.1.36/vfs_fonts.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/DataTables-1.10.20/js/jquery.dataTables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/DataTables-1.10.20/js/dataTables.bootstrap4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Buttons-1.6.1/js/dataTables.buttons.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Buttons-1.6.1/js/buttons.bootstrap4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Buttons-1.6.1/js/buttons.colVis.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Buttons-1.6.1/js/buttons.flash.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Buttons-1.6.1/js/buttons.html5.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Buttons-1.6.1/js/buttons.print.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Responsive-2.2.3/js/dataTables.responsive.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Responsive-2.2.3/js/responsive.bootstrap4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/RowGroup-1.1.1/js/dataTables.rowGroup.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/RowReorder-1.2.6/js/dataTables.rowReorder.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Scroller-2.0.1/js/dataTables.scroller.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/datatables/components/Select-1.3.1/js/dataTables.select.min.js') }}"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.20/dataRender/ellipsis.js"></script>
    <!-- JS DataTables -->

</head>

<body>

    <nav class="navbar navbar-horizontal navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <div class="d-block d-sm-block d-md-none">
                <a class="navbar-brand cursor-pointer text-light" href="#">
                    <img src="{{ url_for('static', filename='images/logo/w-logo.png') }}" class="img-fluid" alt="Crashell">
                </a>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                <div class="d-none d-sm-none d-md-block">
                    <a class="navbar-brand" href="#">
                        <img src="{{ url_for('static', filename='images/logo/w-logo.png') }}" alt="Antonio Moreno" />
                    </a>
                </div>
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item active">
                        <a class="nav-link text-light" href="./">
                            <i class="fas fa-home"></i> Principal
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-light" href="#" id="option_header_mis_libros" onclick="javascript: getMyBooks();" >
                            <i class="fas fa-book"></i> Mis libros
                        </a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link text-light" href="./">
                            <i class="fas fa-globe-americas"></i> Libros de Google
                        </a>
                    </li> -->
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <div class="dropdown show">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user"></i> {{session["nickname"]}}
                        </a>

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a class="dropdown-item" href="./logout"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </nav>
    <div class="container my-4 py-4"></div>

    <main class="container my-4" role="main" id="main_dashboard">

        <h1 class="bd-title text-light">Biblioteca</h1>
        <p class="bd-lead text-light">¡Te muestro los 9 libros más recientes que se han publicado!</p>

        <div class="row row-cols-1 row-cols-md-3">
            {% for book in recent_books %}
                <div class="col mb-4">
                    <div class="card h-100" style="background: rgba(0,0,0,.4); color: #fff;">
                        <div class="row">
                            <div class="col-md-4 col-4">
                                <img src="{{ url_for('static', filename='images/study.png') }}" style="padding: 10px; width: 100%; height: auto; margin: 15% 0 0 15px;" alt="...">
                            </div>
                            <div class="col-md-8 col-8">
                                <div class="card-body">
                                    <h5 class="card-title">{{book.title}}</h5>
                                    <p class="card-text">{{book.author}}</p>
                                    <p class="card-text"><small class="text-muted"><i class="fas fa-clock"></i> {{book.year}}</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <hr>

        <p class="bd-lead text-light">¡Te muestro los 9 libros con mayor antigüedad que se han publicado!</p>

        <div class="row row-cols-1 row-cols-md-3">
            {% for book in old_books %}
            <div class="col mb-4">
                <div class="card h-100" style="background: rgba(0,0,0,.4); color: #fff;">
                    <div class="row">
                        <div class="col-md-4 col-4">
                            <img src="{{ url_for('static', filename='images/study.png') }}"
                                style="padding: 10px; width: 100%; height: auto; margin: 15% 0 0 15px;" alt="...">
                        </div>
                        <div class="col-md-8 col-8">
                            <div class="card-body">
                                <h5 class="card-title">{{book.title}}</h5>
                                <p class="card-text">{{book.author}}</p>
                                <p class="card-text"><small class="text-muted"><i class="fas fa-clock"></i>
                                        {{book.year}}</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        {% block main %} {% endblock %}

    </main>

    <footer>
        
        <input type="hidden" id="btnUpdateMyBooks" class="btn mr-2 mb-2 btn-primary" data-toggle="modal"
            data-target="#UpdateMyBooks" />

        <div class="modal fade" id="UpdateMyBooks" tabindex="-1" role="dialog" aria-labelledby="UpdateMyBooksLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="FormUpdateMyBooks">
                        <div class="modal-header">
                            <div class="container d-flex pl-0"><img
                                    src="{{ url_for('static', filename='images/logo/favicon.png') }}">
                                <h5 class="modal-title ml-2" id="signinLabel">Actualización</h5>
                            </div>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
        
                        <div class="modal-body">
                            <p class="text-muted">¡Ya quiero ver tus ocurrencias! 😁</p>
        
                            <label id="update_data_isbn"></label>
                            <input type="hidden" id="update_data_isbn_value" value="" />

                            <div class="row">
                                <div class="col-12">
                                    <label for="update_book_title">Título</label>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="fas fa-pen-alt"></i></span>
                                        </div>
                                        <input type="text" class="form-control" placeholder="Título del libro" id="update_book_title"
                                            aria-label="update_book_title" aria-describedby="update_book_title">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <label for="update_book_author">Autor</label>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="fa fa-user" aria-hidden="true"></i></span>
                                        </div>
                                        <input type="text" class="form-control" placeholder="Autor" id="update_book_author" aria-label="update_book_author" aria-describedby="update_book_author">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <label for="update_book_year">Año de publicación</label>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="fas fa-clock"></i></span>
                                        </div>
                                        <input type="number" class="form-control" placeholder="Año de publicación" id="update_book_year"
                                            aria-label="update_book_year" aria-describedby="update_book_year">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                            <button type="button" id="update_book_submit" class="btn btn-primary text-light">Actualizar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <input type="hidden" id="btnPanelReviews" class="btn mr-2 mb-2 btn-primary" data-toggle="modal"
            data-target="#PanelReviews" />

        <div class="modal fade" id="PanelReviews" tabindex="-1" role="dialog" aria-labelledby="PanelReviewsLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <form id="PanelReviews">
                        <div class="modal-header">
                            <div class="container d-flex pl-0"><img
                                    src="{{ url_for('static', filename='images/logo/favicon.png') }}">
                                <h5 class="modal-title ml-2" id="signinLabel">Reviews</h5>
                            </div>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
        
                        <div class="modal-body">
                            <p class="text-muted">¡Veamos qué dicen sobre el libro, aunque, también puedes decir algo! 🧐</p>
                            <hr>
                            <div class="row row-cols-1 row-cols-md-2">
                                <div class="col-md-5 mb-4">
                                    <label id="panel_review_book_isbn"></label>
                                    <input type="hidden" id="panel_review_book_isbn_value" value="" />

                                    <div class="card h-100" style="background: rgba(0,0,0,.4); color: #fff;">
                                        <div class="row">
                                            <div class="col-md-4 col-4">
                                                <img src="{{ url_for('static', filename='images/study.png') }}"
                                                    style="padding: 10px; width: 100%; height: auto; margin: 15% 0 0 15px;" alt="...">
                                            </div>
                                            <div class="col-md-8 col-8">
                                                <div class="card-body">
                                                    <h5 class="card-title" id="panel_review_book_title"></h5>
                                                    <p class="card-text" id="panel_review_book_author"></p>
                                                    <p class="card-text" id="panel_review_book_year"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-7">
                                    <form id="FormPanelReviews">
                                        <p>Haz una reseña de este libro 🤓</p>
                                        <div class="rating">
                                        
                                            <input type="radio" onclick="javascript: change_stars('5');" name="rating" id="r1">
                                            <label for="r1"></label>
                                        
                                            <input type="radio" onclick="javascript: change_stars('4');" name="rating" id="r2">
                                            <label for="r2"></label>
                                        
                                            <input type="radio" onclick="javascript: change_stars('3');" name="rating" id="r3">
                                            <label for="r3"></label>
                                        
                                            <input type="radio" onclick="javascript: change_stars('2');" name="rating" id="r4">
                                            <label for="r4"></label>
                                        
                                            <input type="radio" onclick="javascript: change_stars('1');" name="rating" id="r5">
                                            <label for="r5"></label>
                                        
                                        </div>
                                        <textarea name="panel_review_book_comment" id="panel_review_book_comment"></textarea>
                                        <button type="button" id="add_review_submit" class="btn btn-primary text-light">Agregar</button>
                                    </form>
                                </div>

                            </div>
                            
                            <hr>

                            <div class="row" id="PanelReviewsShowData">
                            </div>
                            
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="bt">
            <div class="elementor-shape divider flip-x injected-svg bg-divider-darker" data-negative="false">
                <svg class="bg-divider-darker" xmlns="http://www.w3.org/2000/svg" viewBox="0 2 1000 100" preserveAspectRatio="none">
                        <path class="elementor-shape-fill" style="box-sizing: unset !important;"
                            d="M421.9,6.5c22.6-2.5,51.5,0.4,75.5,5.3c23.6,4.9,70.9,23.5,100.5,35.7c75.8,32.2,133.7,44.5,192.6,49.7 c23.6,2.1,48.7,3.5,103.4-2.5c54.7-6,106.2-25.6,106.2-25.6V0H0v30.3c0,0,72,32.6,158.4,30.5c39.2-0.7,92.8-6.7,134-22.4 c21.2-8.1,52.2-18.2,79.7-24.2C399.3,7.9,411.6,7.5,421.9,6.5z">
                        </path>
                    </svg>
            </div>
        </div>

        <div class="container-fluid bg-cs-darker">
            <div class="container py-1">
                <div class="row cs-footer text-center py-lg-10 pt-3 pb-5">
                    <div class="col-12">
                        <img src="{{ url_for('static', filename='images/logo/w-logo.png') }}" class="img-fluid" alt="Crashell">
                    </div>

                    <div class="col-12 mt-4">
                        <ul class="cs-social-list">
                            <li>
                                <a class="icon icon-sm icon-circle icon-circle-md icon-cs-light fab fa-github" target="_blank" rel="noopener noreferrer" href="https://github.com/jersonmartinez/">
                                </a>
                            </li>
                            <li>
                                <a class="icon icon-sm icon-circle icon-circle-md icon-cs-light fab fa-twitter" target="_blank" rel="noopener noreferrer" href="https://twitter.com/antoniomorenosm"></a>
                            </li>
                            <li>
                                <a class="icon icon-sm icon-circle icon-circle-md icon-cs-light fab fa-linkedin-in" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/jersonmartinezsm/"></a>
                            </li>
                            <li>
                                <a class="icon icon-sm icon-circle icon-circle-md icon-cs-light fab fa-youtube" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/gvideosmtutorialesgm"></a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-md-12 mt-4">
                        <small class="text-light">
                            Todos los derechos reservados
                        </small>
                    </div>
                </div>
            </div>
        </div>

    </footer>

    <a href="#" class="scroll-top text-center" id="ScrollToTop">
        <i class="fas fa-angle-double-up"></i>
    </a>

    <script src="{{ url_for('static', filename='libs/bootstrap/js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/toastr/js/toastr.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/custom/js/global.js') }}"></script>
    <script src="{{ url_for('static', filename='libs/custom/js/dashboard.js') }}"></script>
    
</body>

</html>